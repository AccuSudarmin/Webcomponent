
   <head>
      <link rel="stylesheet" href="./css/az-slide.css">
   </head>
   <body>
<script>
   (function() {
      var importDoc = document._currentScript.ownerDocument; // importee
      var allSlide = [];
      var currentSlide = 1;
      var hit = false
         hitTimeOut = null;
      var timeOutBefore = null
         , timeOutNow = null;

      var setSlide = function(slideNow, slideBefore){
         clearTimeout(timeOutBefore);
         clearTimeout(timeOutNow);

         var zindexNow = "2"
            , zindexBefore = "1";

         if (slideBefore) {

            if (slideNow > slideBefore) {
               var leftPositionBf = "-" + parseInt(allSlide[slideBefore-1].offsetWidth) + "px";
            } else {
               var leftPositionBf = parseInt(allSlide[slideBefore-1].offsetWidth) + "px";
            }

            allSlide[slideBefore-1].style.zIndex = zindexBefore;
            timeOutBefore = setTimeout(function () {
               allSlide[slideBefore-1].style.left = leftPositionBf;
               allSlide[slideBefore-1].style.display = "none";
            }, 1200);
         }

         allSlide[slideNow-1].style.display = "table";
         allSlide[slideNow-1].style.zIndex = zindexNow;

         if (slideNow < slideBefore) {
            var leftPosition = "-" + parseInt(allSlide[slideNow-1].offsetWidth) + "px";
         } else {
            var leftPosition = parseInt(allSlide[slideNow-1].offsetWidth) + "px";
         }

         allSlide[slideNow-1].style.left = leftPosition;

         timeOutNow = setTimeout(function () {
            allSlide[slideNow-1].style.left = "0px";
         }, 100);

         currentSlide = slideNow;

         location.hash = slideNow;
      }

      if (window.location.hash.substr(1)){
         currentSlide = parseInt(window.location.hash.substr(1));
      }

      // az-button js
      var azslide = Object.create(HTMLElement.prototype);

      azslide.createdCallback = function () {
         var mainBackColor = this.getAttribute("color") || "white";
         var contentColor = this.getAttribute("contentColor") || "black";
         allSlide.push(this);

         this.style.backgroundColor = mainBackColor;
         this.style.color = contentColor;

         if (allSlide.length === currentSlide) {
            setSlide(currentSlide);
         } else {
            // this.style.opacity = 0;
            this.style.display = "none";
         }

      };

      document.registerElement('az-slide', {prototype: azslide});
      // end of js az-button

      document.body.addEventListener("keydown" , function(e){
         // console.log(e.keyCode);

         if (!hit) {
            switch (e.keyCode) {
               case 39:
                  if (currentSlide + 1 <= allSlide.length) {
                     var slideBefore = currentSlide;
                     var slideNow = currentSlide + 1;

                     setSlide(slideNow, slideBefore);
                  }
                  break;
               case 37:
                  if (currentSlide-1 >= 1) {
                     var slideBefore = currentSlide;
                     var slideNow = currentSlide - 1;

                     setSlide(slideNow, slideBefore);
                  }
                  break;
            }
            hit = true;
         }

         if (!hitTimeOut) {
            hitTimeOut = setTimeout(function () {
               hit = false;
               hitTimeOut = false;
            }, 1200);
         }
      });
   })();
</script>
